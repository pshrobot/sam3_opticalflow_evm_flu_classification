# 3동 학습 모델을 이용한 2동-D05 카메라 예측 결과 분석 보고서

생성일: 2026-01-14
수정일: 2026-01-15 (피처 생성 버그 수정 후 재분석)

## 개요

D05 케이지의 CCTV 영상 4개에 대한 닭 건강 상태 예측 결과입니다.
Optical Flow + EVM 기반 LightGBM 모델 (AUC 97.00%)을 사용하여 분석했습니다.

## 예측 결과 요약 (날짜순)

| 날짜 | 비디오 | 출력 | 프레임 수 | Sick 비율 | 판정 |
|------|--------|------|-----------|-----------|------|
| **2025-10-09** | D05_20251009113659.mp4 | D05_1 | 2,849 | **64.1%** | SICK (MODERATE) |
| **2025-10-13** | D05_20251013115624.mp4 | D05_2 | 5,039 | **43.7%** | UNCERTAIN |
| **2025-10-18** | D05_20251018115758.mp4 | D05_3 | 5,036 | **53.1%** | SICK (MODERATE) |
| **2025-10-20** | D05_20251020111704.mp4 | D05_4 | 3,058 | **71.7%** | SICK (HIGH) |

## 상세 통계

### D05_1 (2025-10-09)

| 항목 | 값 |
|------|-----|
| 총 프레임 | 2,849 |
| Sick 예측 | 1,825 (64.1%) |
| Normal 예측 | 1,024 (35.9%) |
| 확률 평균 | 0.603 |
| 확률 중앙값 | 0.662 |
| 확률 최소 | 0.005 |
| 확률 최대 | 0.996 |

### D05_2 (2025-10-13)

| 항목 | 값 |
|------|-----|
| 총 프레임 | 5,039 |
| Sick 예측 | 2,200 (43.7%) |
| Normal 예측 | 2,839 (56.3%) |
| 확률 평균 | 0.446 |
| 확률 중앙값 | 0.430 |
| 확률 최소 | 0.001 |
| 확률 최대 | 0.994 |

### D05_3 (2025-10-18)

| 항목 | 값 |
|------|-----|
| 총 프레임 | 5,036 |
| Sick 예측 | 2,676 (53.1%) |
| Normal 예측 | 2,360 (46.9%) |
| 확률 평균 | 0.514 |
| 확률 중앙값 | 0.542 |
| 확률 최소 | 0.001 |
| 확률 최대 | 0.998 |

### D05_4 (2025-10-20)

| 항목 | 값 |
|------|-----|
| 총 프레임 | 3,058 |
| Sick 예측 | 2,194 (71.7%) |
| Normal 예측 | 864 (28.3%) |
| 확률 평균 | 0.659 |
| 확률 중앙값 | 0.731 |
| 확률 최소 | 0.007 |
| 확률 최대 | 0.998 |

## 추세 분석

```
Sick 비율 변화:

Oct 9  [████████████████░░░░░░░░░] 64.1%  SICK (MODERATE)
Oct 13 [███████████░░░░░░░░░░░░░░] 43.7%  UNCERTAIN
Oct 18 [█████████████░░░░░░░░░░░░] 53.1%  SICK (MODERATE)
Oct 20 [██████████████████░░░░░░░] 71.7%  SICK (HIGH)
```

### 시계열 그래프

```
100% ┤
     │
 80% ┤                           ●
     │    ●                     /
 60% ┤     \                   /
     │      \       ●─────────/
 40% ┤       ●─────/
     │
 20% ┤
     │
  0% ┼────┬────┬────┬────┬────┬────
        Oct9  Oct13 Oct18 Oct20
```

## 분석 결과

### 주요 발견

1. **초기 상태 (Oct 9)**
   - Sick 비율 64.1%로 중간 수준의 이상 징후
   - 확률 분포가 넓음 (std 0.287)

2. **일시적 개선 (Oct 13)**
   - Sick 비율이 43.7%로 감소
   - 불확실 영역으로 판정됨
   - 자연 회복 또는 환경 변화 가능성

3. **재악화 추세 (Oct 13 → Oct 20)**
   - Oct 13 (43.7%) → Oct 18 (53.1%) → Oct 20 (71.7%)
   - 점진적으로 Sick 비율 증가
   - 최종적으로 높은 신뢰도의 Sick 판정

### 해석

- **10월 9일**: 중간 수준의 질병 징후. 관찰 필요
- **10월 13일**: 일시적 개선. 불확실 상태
- **10월 18일**: 다시 중간 수준으로 상승
- **10월 20일**: 높은 수준의 질병 징후. 적극적 대응 필요

## 판정 기준

| Sick 비율 | 판정 |
|-----------|------|
| > 70% | SICK (HIGH CONFIDENCE) |
| > 50% | SICK (MODERATE CONFIDENCE) |
| > 30% | UNCERTAIN |
| ≤ 30% | NORMAL |

## 모델 정보

- **모델**: LightGBM
- **학습 데이터**: Normal + Sick 비디오 (EVM 결합)
- **성능**: CV AUC 97.00%, Test Accuracy 90.67%
- **피처 수**: 806개 (Optical Flow 히스토그램 + EVM)
- **모델 파일**: `output/models/lightgbm_model_20260104_121820.txt`

## 파일 위치

| 출력 | 예측 결과 파일 |
|------|----------------|
| D05_1 | `output/D05_1/prediction/prediction_results.json` |
| D05_2 | `output/D05_2/predictions_fixed/prediction_results.json` |
| D05_3 | `output/D05_3/predictions_fixed/prediction_results.json` |
| D05_4 | `output/D05_4/predictions/prediction_results.json` |

## 수정 이력

### 2026-01-15: 피처 생성 버그 수정

`create_lightgbm_features_predict.py` 스크립트의 버그로 인해 D05_2, D05_3의 결과가 잘못되었음을 발견하고 수정함.

**버그 내용:**
1. EVM 피처 접두사가 `evm_` 대신 `_evm` 접미사로 생성됨
2. 피처 컬럼이 알파벳순으로 정렬되어 학습 데이터와 순서 불일치

**수정 전후 비교:**

| 출력 | 수정 전 | 수정 후 |
|------|--------|--------|
| D05_2 | 99.9% | **43.7%** |
| D05_3 | 99.8% | **53.1%** |
